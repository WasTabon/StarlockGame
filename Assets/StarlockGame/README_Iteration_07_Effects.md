# Итерация 7: Полировка — эффекты, звуки, juice

## Что добавлено

### Новые скрипты

**Effects:**
- `MatchEffects.cs` — частицы при матче (разлетаются от центра)
- `ScreenShake.cs` — тряска камеры (при поражении / матче)
- `ScorePopup.cs` — всплывающий текст "+100" при матче
- `GameAudio.cs` — процедурно генерируемые звуки
- `JuiceManager.cs` — связывает все эффекты воедино

**Editor:**
- `StarlockSetup_07_Effects.cs` — настройка эффектов

### Обновлённые скрипты

- `GameplayController.cs` — интеграция с JuiceManager

---

## Установка

### 1. Скопируйте файлы

| Файл | Куда |
|------|------|
| `MatchEffects.cs` | `Assets/StarlockGame/Scripts/Effects/` |
| `ScreenShake.cs` | `Assets/StarlockGame/Scripts/Effects/` |
| `ScorePopup.cs` | `Assets/StarlockGame/Scripts/Effects/` |
| `GameAudio.cs` | `Assets/StarlockGame/Scripts/Effects/` |
| `JuiceManager.cs` | `Assets/StarlockGame/Scripts/Effects/` |
| `GameplayController.cs` | `Assets/StarlockGame/Scripts/Gameplay/` (заменить!) |
| `StarlockSetup_07_Effects.cs` | `Assets/StarlockGame/Editor/` |

### 2. Откройте Gameplay сцену

### 3. Запустите Editor скрипт

**Starlock → Setup Effects (Iteration 7)**

### 4. Сохраните сцену

---

## Эффекты

### При матче:
1. **Частицы** — 12 цветных кружков разлетаются от центра
2. **+100 текст** — всплывает и исчезает
3. **Звук** — приятный "чайм"
4. **Лёгкая тряска** — едва заметная

### При поражении:
1. **Сильная тряска** — камера трясётся 0.5 сек
2. **Грустный звук** — нисходящий тон

### При победе:
1. **Фанфары** — восходящие ноты

### При тапе:
1. **Звук клика** — короткий бип

### При входе фигуры в круг:
1. **Whoosh** — звук движения

---

## Настройки в инспекторе

### JuiceManager

| Параметр | Описание |
|----------|----------|
| Enable Effects | Включить/выключить частицы и текст |
| Enable Sounds | Включить/выключить звуки |
| Enable Screen Shake | Включить/выключить тряску |

### MatchEffects

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| Particle Count | Количество частиц | 12 |
| Particle Speed | Скорость разлёта | 5 |
| Particle Lifetime | Время жизни | 0.5 сек |
| Particle Size | Размер частиц | 0.15 |

### ScreenShake

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| Default Duration | Длительность | 0.3 сек |
| Default Strength | Сила | 0.2 |
| Default Vibrato | Частота | 20 |

### ScorePopup

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| Float Distance | Высота подъёма | 1 |
| Duration | Длительность | 0.8 сек |
| Font Size | Размер шрифта | 48 |

### GameAudio

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| SFX Volume | Громкость эффектов | 1 |
| Generate Sounds | Генерировать звуки | true |

---

## Звуки

Все звуки генерируются процедурно в коде (без внешних файлов):

| Звук | Описание |
|------|----------|
| Tap | Короткий бип 440Hz |
| Match | Аккорд из 3 нот |
| Victory | 4 восходящие ноты (фанфары) |
| Game Over | Нисходящий тон 400→200Hz |
| Shape Enter | Шум (whoosh) |

---

## Иерархия после настройки

```
Gameplay Scene
├── ...
├── MatchEffects          (NEW)
│   └── EffectsParent
├── ScreenShake           (NEW)
├── ScorePopup            (NEW)
├── GameAudio             (NEW)
└── JuiceManager          (NEW)
```

---

## Как тестировать

### В Play mode:

1. **Тап** → слышен звук клика
2. **Фигура входит в круг** → звук whoosh
3. **Матч** → частицы + "+100" текст + звук + лёгкая тряска
4. **Поражение** → сильная тряска + грустный звук
5. **Победа** → фанфары

---

## Ожидаемый результат

- ✅ При матче — цветные частицы разлетаются от центра
- ✅ При матче — "+100" всплывает и исчезает
- ✅ При матче — приятный звук
- ✅ При матче — лёгкая тряска камеры
- ✅ При поражении — сильная тряска камеры
- ✅ При поражении — грустный звук
- ✅ При победе — звук фанфар
- ✅ При тапе — звук клика
- ✅ При входе фигуры — звук whoosh
- ✅ Все эффекты можно отключить в JuiceManager

---

## Следующая итерация

**Итерация 8:** Прогрессия уровней
- Разное количество фигур на уровень
- Таймер (опционально)
- Сохранение прогресса (PlayerPrefs)
